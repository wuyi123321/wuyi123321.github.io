webpackJsonp([0],{"/66K":function(t,e,o){var n=o("XLwt"),a=o("YCip");o("nuAP"),o("QdU8"),n.registerCoordinateSystem("bmap",a),n.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(t,e){e.eachComponent("bmap",function(t){var e=t.getBMap(),o=e.getCenter();t.setCenterAndZoom([o.lng,o.lat],e.getZoom())})});e.version="1.0.0"},QdU8:function(t,e,o){var n=o("XLwt").extendComponentView({type:"bmap",render:function(t,e,o){var n=!0,a=t.getBMap(),i=o.getZr().painter.getViewportRoot(),r=t.coordinateSystem,p=function(e,a){if(!n){var p=i.parentNode.parentNode.parentNode,s=[-parseInt(p.style.left,10)||0,-parseInt(p.style.top,10)||0];i.style.left=s[0]+"px",i.style.top=s[1]+"px",r.setMapOffset(s),t.__mapOffset=s,o.dispatchAction({type:"bmapRoam"})}};function s(){n||o.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",p),a.addEventListener("zoomend",s),this._oldMoveHandler=p,this._oldZoomEndHandler=s;var l=t.get("roam");l&&"scale"!==l?a.enableDragging():a.disableDragging(),l&&"move"!==l?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var c=t.__mapStyle,d=t.get("mapStyle")||{},m=JSON.stringify(d);JSON.stringify(c)!==m&&(Object.keys(d).length&&a.setMapStyle(d),t.__mapStyle=JSON.parse(m)),n=!1}});t.exports=n},YCip:function(t,e,o){var n,a=o("XLwt"),i=a.util,r=a.graphic,p=a.matrix;function s(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function l(t,e){return e=e||[0,0],i.map([0,1],function(o){var n=e[o],a=t[o]/2,i=[],r=[];return i[o]=n-a,r[o]=n+a,i[1-o]=r[1-o]=e[1-o],Math.abs(this.dataToPoint(i)[o]-this.dataToPoint(r)[o])},this)}s.prototype.dimensions=["lng","lat"],s.prototype.setZoom=function(t){this._zoom=t},s.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},s.prototype.setMapOffset=function(t){this._mapOffset=t},s.prototype.getBMap=function(){return this._bmap},s.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),o=this._bmap.pointToOverlayPixel(e),n=this._mapOffset;return[o.x-n[0],o.y-n[1]]},s.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},s.prototype.getViewRect=function(){var t=this._api;return new r.BoundingRect(0,0,t.getWidth(),t.getHeight())},s.prototype.getRoamTransform=function(){return p.create()},s.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(l,this)}}},s.dimensions=s.prototype.dimensions,s.create=function(t,e){var o,a=e.getDom();t.eachComponent("bmap",function(t){var i=e.getZr().painter,r=i.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(n=n||function(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),o)throw new Error("Only one bmap component can exist");if(!t.__bmap){var p=a.querySelector(".ec-extension-bmap");p&&(r.style.left="0px",r.style.top="0px",a.removeChild(p)),(p=document.createElement("div")).style.cssText="width:100%;height:100%",p.classList.add("ec-extension-bmap"),a.appendChild(p);var l=t.__bmap=new BMap.Map(p),c=new n(r);l.addOverlay(c),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}l=t.__bmap;var d=t.get("center"),m=t.get("zoom");if(d&&m){var f=new BMap.Point(d[0],d[1]);l.centerAndZoom(f,m)}(o=new s(l,e)).setMapOffset(t.__mapOffset||[0,0]),o.setZoom(m),o.setCenter(d),t.coordinateSystem=o}),t.eachSeries(function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=o)})};var c=s;t.exports=c},caIY:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Dd8w"),a=o.n(n),i=o("NYxO"),r=o("Icdr");o("/66K");var p={data:function(){return{mapdata:[],centerdata:{}}},computed:a()({},Object(i.d)({centerpoint:"centerpoint"})),watch:{},mounted:function(){this.getpoints()},methods:{init:function(){var t=this;console.log(t.centerpoint),console.log(t.mapdata),t.centerdata.name=t.centerpoint.centerName,t.centerdata.lng=t.centerpoint.centerLongitude,t.centerdata.lat=t.centerpoint.centerLatitude,t.drawChinaMap(t.centerdata.lng,t.centerdata.lat,14)},getpoints:function(){var t=this;t.api(t,"post","信息获取中...","common/company/selectPointListByCId.json",{centerId:t.centerpoint.centerId},function(e){if(console.log(e),0==e.statusCode)for(var o=0;o<e.dataInfo.listData.length;o++)t.mapdata.push({name:e.dataInfo.listData[o].companyName,lng:e.dataInfo.listData[o].pointLongitude,lat:e.dataInfo.listData[o].pointLatitude}),t.init()})},convertData:function(){for(var t=[],e=0;e<this.mapdata.length;e++)t.push({name:this.mapdata[e].name,value:[this.mapdata[e].lng,this.mapdata[e].lat]});return t},drawChinaMap:function(t,e,o){var n=this,a={title:{text:""},tooltip:{trigger:"item"},bmap:{center:[t,e],zoom:o,roam:!0},series:[{name:"企业信息",type:"scatter",coordinateSystem:"bmap",data:n.convertData(),symbolSize:12,label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"#f66"}}},{name:"中心点",type:"effectScatter",coordinateSystem:"bmap",data:[{name:"中心点",value:[t,e]}],symbolSize:20,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#f66",shadowBlur:10,shadowColor:"#333"}},zlevel:1}]},i=r.init(document.getElementById("myChart"));i.setOption(a);var p=i.getModel().getComponent("bmap").getBMap();n.drawline(p),n.addControl(p,"第二象限",BMAP_ANCHOR_TOP_LEFT,10,10,function(){n.topcontrol(2)}),n.addControl(p,"第一象限",BMAP_ANCHOR_TOP_RIGHT,10,10,function(){n.topcontrol(1)}),n.addControl(p,"第四象限",BMAP_ANCHOR_BOTTOM_RIGHT,10,40,function(){n.topcontrol(4)}),n.addControl(p,"第三象限",BMAP_ANCHOR_BOTTOM_LEFT,10,40,function(){n.topcontrol(3)})},topcontrol:function(t){this.$router.push({path:"companylist",query:{position:t,centerId:this.centerpoint.centerId}})},getlinedata:function(t,e,o){return{top:{lng:t,lat:(e+9e-6*o).toFixed(5)},bottom:{lng:t,lat:(e-9e-6*o).toFixed(5)},left:{lng:(t-1e-5*o).toFixed(5),lat:e},right:{lng:(t+1e-5*o).toFixed(5),lat:e}}},drawline:function(t){var e=this.getlinedata(this.centerdata.lng,this.centerdata.lat,6e3),o=new BMap.Polyline([new BMap.Point(e.top.lng,e.top.lat),new BMap.Point(e.bottom.lng,e.bottom.lat)],{strokeColor:"#f66",strokeWeight:1,strokeOpacity:.5}),n=new BMap.Polyline([new BMap.Point(e.left.lng,e.left.lat),new BMap.Point(e.right.lng,e.right.lat)],{strokeColor:"#f66",strokeWeight:1,strokeOpacity:.5});t.addOverlay(o),t.addOverlay(n)},addControl:function(t,e,o,n,a,i){function r(){this.defaultAnchor=o,this.defaultOffset=new BMap.Size(n,a)}r.prototype=new BMap.Control,r.prototype.initialize=function(t){var o=document.createElement("div");return o.appendChild(document.createTextNode(e)),o.classList.add("Controlfour"),o.style.cursor="pointer",o.style.border="1px solid #ccc",o.style.backgroundColor="rgba(255,255,255,.5)",o.style.borderRadius="3px",o.style.padding="5px",o.style.boxShadow="1px 1px 2px rgba(0,0,0,.4)",o.onclick=i,t.getContainer().appendChild(o),o};var p=new r;t.addControl(p)}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"zhuye"}},[e("yd-navbar",{attrs:{title:this.centerpoint.areaName,bgcolor:"#0FA0FA",color:"#fff"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mapcontent"},[e("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden"},attrs:{id:"myChart"}})])}]};var l=o("VU/8")(p,s,!1,function(t){o("kIMI")},"data-v-1ca4b6fa",null);e.default=l.exports},kIMI:function(t,e){},nuAP:function(t,e,o){var n=o("XLwt").extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var o,n,a=this.option;return o=t,n=a.center,!(o&&n&&o[0]===n[0]&&o[1]===n[1]&&e===a.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},roam:!1}});t.exports=n}});
//# sourceMappingURL=0.93ca0e859cc7f8b9fa26.js.map